{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["business_relevant", "selected_action", "confidence", "reasoning", "document_type", "transaction_direction", "primary_party", "extracted_summary"],
  "properties": {
    "business_relevant": {
      "type": "boolean",
      "description": "Whether document is relevant to business operations"
    },
    "selected_action": {
      "type": ["string", "null"],
      "description": "Selected action name in snake_case (e.g., create_invoice) or null if not applicable"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "Confidence score for the selected action (0-100)"
    },
    "reasoning": {
      "type": "string",
      "description": "2-3 sentences explaining the decision logic"
    },
    "document_type": {
      "type": "string",
      "description": "Type of document (invoice, bill, receipt, etc.)"
    },
    "transaction_direction": {
      "type": "string",
      "enum": ["incoming", "outgoing", "neutral"],
      "description": "Direction of money flow"
    },
    "primary_party": {
      "type": "object",
      "required": ["name", "role"],
      "properties": {
        "name": {
          "type": ["string", "null"],
          "description": "Name of primary party"
        },
        "role": {
          "type": ["string", "null"],
          "enum": ["customer", "vendor", "employee", "other", null],
          "description": "Role of primary party"
        }
      }
    },
    "extracted_summary": {
      "type": "object",
      "required": ["total_amount", "currency", "document_date", "document_number"],
      "properties": {
        "total_amount": {
          "type": ["number", "null"],
          "description": "Total amount on document"
        },
        "currency": {
          "type": ["string", "null"],
          "description": "Currency code (USD, EUR, etc.)"
        },
        "document_date": {
          "type": ["string", "null"],
          "description": "Document date in YYYY-MM-DD format"
        },
        "document_number": {
          "type": ["string", "null"],
          "description": "Document/invoice/bill number"
        }
      }
    }
  }
}
